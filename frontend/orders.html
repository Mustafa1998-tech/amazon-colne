<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Orders - Amazon Clone</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        amazon: {
                            blue: '#146EB4',
                            orange: '#FF9900',
                            dark: '#131921',
                            light: '#232F3E'
                        }
                    }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="css/style.css">
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-amazon-dark text-white sticky top-0 z-50">
        <div class="container mx-auto px-4 py-3">
            <div class="flex items-center justify-between">
                <h1 class="text-2xl font-bold cursor-pointer text-amazon-orange" onclick="window.location.href='index.html'">
                    amazon
                </h1>
                <div class="flex items-center space-x-6">
                    <div class="cursor-pointer hover:text-amazon-orange" onclick="window.location.href='cart.html'">
                        <span class="text-sm">Cart</span>
                    </div>
                    <div class="cursor-pointer hover:text-amazon-orange" onclick="window.location.href='wishlist.html'">
                        <span class="text-sm">Wishlist</span>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Breadcrumb -->
    <div class="bg-white py-3 border-b">
        <div class="container mx-auto px-4">
            <nav class="text-sm text-gray-600">
                <a href="index.html" class="hover:text-amazon-blue">Home</a>
                <span class="mx-2">></span>
                <span class="text-gray-800 font-medium">Your Orders</span>
            </nav>
        </div>
    </div>

    <!-- Orders Content -->
    <div class="container mx-auto px-4 py-8">
        <div class="mb-8">
            <h1 class="text-3xl font-bold mb-4">Your Orders</h1>
            <div class="flex flex-wrap gap-4">
                <button onclick="filterOrders('all')" class="filter-btn bg-amazon-blue text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition duration-200">
                    All Orders
                </button>
                <button onclick="filterOrders('pending')" class="filter-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300 transition duration-200">
                    Pending
                </button>
                <button onclick="filterOrders('processing')" class="filter-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300 transition duration-200">
                    Processing
                </button>
                <button onclick="filterOrders('shipped')" class="filter-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300 transition duration-200">
                    Shipped
                </button>
                <button onclick="filterOrders('delivered')" class="filter-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300 transition duration-200">
                    Delivered
                </button>
                <button onclick="filterOrders('cancelled')" class="filter-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300 transition duration-200">
                    Cancelled
                </button>
            </div>
        </div>

        <div id="loadingSpinner" class="text-center py-12">
            <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amazon-blue"></div>
            <p class="mt-2 text-gray-600">Loading your orders...</p>
        </div>

        <div id="noOrders" class="text-center py-12 hidden">
            <div class="text-6xl mb-4">📦</div>
            <h2 class="text-xl font-semibold mb-2">No orders found</h2>
            <p class="text-gray-600 mb-6">You haven't placed any orders yet. Start shopping to see your orders here.</p>
            <button onclick="window.location.href='index.html'" class="bg-amazon-orange text-black font-bold py-3 px-6 rounded-lg hover:bg-yellow-500 transition duration-200">
                Start Shopping
            </button>
        </div>

        <div id="ordersContainer" class="space-y-6 hidden">
            <!-- Orders will be loaded here -->
        </div>
    </div>

    <!-- Order Details Modal -->
    <div id="orderModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-lg p-6 w-full max-w-4xl max-h-screen overflow-y-auto">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-bold">Order Details</h3>
                    <button onclick="closeOrderModal()" class="text-gray-500 hover:text-gray-700">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                
                <div id="orderModalContent">
                    <!-- Order details will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Toast -->
    <div id="notification" class="fixed top-4 right-4 z-50 hidden">
        <div id="notificationContent" class="bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg">
            <div class="flex items-center">
                <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                </svg>
                <span id="notificationText">Order updated!</span>
            </div>
        </div>
    </div>

    <script src="js/main.js"></script>
    <script>
        let currentFilter = 'all';

        // Initialize orders page
        document.addEventListener('DOMContentLoaded', function() {
            loadOrdersPage();
        });

        function filterOrders(status) {
            currentFilter = status;
            
            // Update filter button styles
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('bg-amazon-blue', 'text-white');
                btn.classList.add('bg-gray-200', 'text-gray-700');
            });
            
            event.target.classList.remove('bg-gray-200', 'text-gray-700');
            event.target.classList.add('bg-amazon-blue', 'text-white');
            
            // Filter and display orders
            filterOrdersByStatus(status);
        }

        function getStatusBadgeClass(status) {
            const classes = {
                'pending': 'bg-yellow-100 text-yellow-800',
                'processing': 'bg-blue-100 text-blue-800',
                'shipped': 'bg-purple-100 text-purple-800',
                'delivered': 'bg-green-100 text-green-800',
                'cancelled': 'bg-red-100 text-red-800'
            };
            return classes[status] || 'bg-gray-100 text-gray-800';
        }

        function getStatusIcon(status) {
            const icons = {
                'pending': '⏳',
                'processing': '🔄',
                'shipped': '🚚',
                'delivered': '✅',
                'cancelled': '❌'
            };
            return icons[status] || '📦';
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
        }

        function viewOrderDetails(orderId) {
            // This would typically fetch order details from the API
            // For now, we'll show a placeholder
            const order = orders.find(o => o.id === orderId);
            if (!order) return;

            const modalContent = document.getElementById('orderModalContent');
            modalContent.innerHTML = `
                <div class="space-y-6">
                    <div class="border-b pb-4">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div>
                                <h4 class="font-semibold text-gray-600">Order Number</h4>
                                <p class="text-lg">#${order.id}</p>
                            </div>
                            <div>
                                <h4 class="font-semibold text-gray-600">Order Date</h4>
                                <p class="text-lg">${formatDate(order.created_at)}</p>
                            </div>
                            <div>
                                <h4 class="font-semibold text-gray-600">Total Amount</h4>
                                <p class="text-lg font-bold text-red-600">$${order.total_price}</p>
                            </div>
                        </div>
                    </div>

                    <div>
                        <h4 class="font-semibold mb-4">Order Items</h4>
                        <div class="space-y-3">
                            ${order.items.map(item => `
                                <div class="flex items-center space-x-4 border rounded-lg p-4">
                                    <div class="w-16 h-16 bg-gray-200 rounded-lg flex items-center justify-center">
                                        <span class="text-2xl">📦</span>
                                    </div>
                                    <div class="flex-1">
                                        <h5 class="font-medium">${item.name}</h5>
                                        <p class="text-sm text-gray-600">Quantity: ${item.quantity}</p>
                                        <p class="text-sm text-gray-600">Price: $${item.price}</p>
                                    </div>
                                    <div class="text-right">
                                        <p class="font-semibold">$${item.total}</p>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <div class="border-t pt-4">
                        <div class="flex justify-between items-center">
                            <div>
                                <span class="font-semibold">Status: </span>
                                <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${getStatusBadgeClass(order.status)}">
                                    ${getStatusIcon(order.status)} ${order.status.charAt(0).toUpperCase() + order.status.slice(1)}
                                </span>
                            </div>
                            ${order.status === 'pending' || order.status === 'processing' ? `
                                <button onclick="cancelOrder(${order.id})" class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition duration-200">
                                    Cancel Order
                                </button>
                            ` : ''}
                        </div>
                    </div>
                </div>
            `;

            document.getElementById('orderModal').classList.remove('hidden');
        }

        function closeOrderModal() {
            document.getElementById('orderModal').classList.add('hidden');
        }

        function cancelOrder(orderId) {
            if (confirm('Are you sure you want to cancel this order?')) {
                // In a real app, this would make an API call
                showNotification('Order cancellation request submitted', 'info');
                closeOrderModal();
            }
        }

        function trackOrder(orderId) {
            // In a real app, this would redirect to a tracking page
            showNotification('Tracking information will be available soon', 'info');
        }

        function reorderItems(orderId) {
            // In a real app, this would add all items from the order back to cart
            showNotification('Items added to cart for reorder', 'success');
        }
    </script>
</body>
</html>